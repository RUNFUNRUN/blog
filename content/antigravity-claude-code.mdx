---
title: Google AI ProでClaude Codeを使う
description: Google AntigravityのOpus4.5をClaude Codeで使う裏技を紹介します。
date: 2026-01-23
tags: ['LLM']
---

## はじめに

最近何かと話題なAntigravityですが、Claude Opus 4.5 (Thinking)を使えることをご存知でしょうか。  
今回はそちらを流用してClaude Codeを動かしたいと思います。

<Callout title='推奨されているやり方ではない上、外部ライブラリも使用するので自己責任でお願いします。' type='warn' />

## 使用するライブラリ

今回はこちらのライブラリを使用します。  
その名の通り、プロキシです。
AntigravityのAPIフォーマットをClaudeのAPIフォーマットに変換するためのライブラリです。

<LinkPreview url='https://github.com/badrisnarayanan/antigravity-claude-proxy' />

## やり方

インストールします

```bash
npm i -g antigravity-claude-proxy@latest
```

起動します

```bash
antigravity-claude-proxy start

╔══════════════════════════════════════════════════════════════╗
║           Antigravity Claude Proxy Server                    ║
╠══════════════════════════════════════════════════════════════╣
║                                                              ║
║  Server and WebUI running at: http://localhost:8080          ║
║                                                              ║
║  Active Modes:                                               ║
║    ✓ Strategy: Hybrid (Smart Distribution)                   ║
║                                                              ║
║  Control:                                                    ║
║    --strategy=<s>     Set account selection strategy         ║
║                         (sticky/round-robin/hybrid)          ║
║    --debug            Enable debug logging                   ║
║    --fallback         Enable model fallback on quota exhaust ║
║    Ctrl+C             Stop server                            ║
║                                                              ║
║  Endpoints:                                                  ║
║    POST /v1/messages         - Anthropic Messages API        ║
║    GET  /v1/models           - List available models         ║
║    GET  /health              - Health check                  ║
║    GET  /account-limits      - Account status & quotas       ║
║    POST /refresh-token       - Force token refresh           ║
║                                                              ║
║  Configuration:                                              ║
║    Storage: /Users/runfunrun/.antigravity-claude-proxy       ║
║                                                              ║
║  Usage with Claude Code:                                     ║
║    export ANTHROPIC_BASE_URL=http://localhost:8080           ║
║    export ANTHROPIC_API_KEY=dummy                            ║
║    claude                                                    ║
║                                                              ║
║  Add Google accounts:                                        ║
║    npm run accounts                                          ║
║                                                              ║
║  Prerequisites (if no accounts configured):                  ║
║    - Antigravity must be running                             ║
║    - Have a chat panel open in Antigravity                   ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
```

フォントの関係で若干表示が崩れてますが許してください。

起動できたら、`http://localhost:8080/#accounts`を開いてアカウントを追加してください。  
私の場合、元々アカウントがありました。
Antigravityで一度ログインしている場合はそこから認証情報をもってきているようです。

次に環境変数を設定します。  
Webのコンソール上からもできるようですが、普通にこちらで設定します。
お使いのシェルの設定に入れてください。

```bash title="~/.zshrc"
export ANTHROPIC_BASE_URL=http://localhost:8080
export ANTHROPIC_API_KEY=dummy
export ANTHROPIC_MODEL=claude-opus-4-5-thinking
export ANTHROPIC_DEFAULT_OPUS_MODEL=claude-opus-4-5-thinking
export ANTHROPIC_DEFAULT_SONNET_MODEL=claude-sonnet-4-5-thinking
export ANTHROPIC_DEFAULT_HAIKU_MODEL=gemini-2.5-flash-lite[1m]
export CLAUDE_CODE_SUBAGENT_MODEL=claude-sonnet-4-5-thinking
export ENABLE_EXPERIMENTAL_MCP_CLI=true
```

あとはClaude Codeを起動すれば完了です。

![claude code screenshot](https://i.gyazo.com/66d32ad0bf53b810df30381c761fc300.jpg)

注意点としては、当たり前ですがClaude Codeを使う時はプロキシサーバーを立ち上げっぱなしにしておく必要があることです。  
コンテナとして常に立ち上げておけば楽かもしれませんね。

ではまた。
